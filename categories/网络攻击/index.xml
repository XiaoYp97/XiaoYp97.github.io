<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>ç½‘ç»œæ”»å‡» on Yellster - Blog</title><link>https://blog.yellster.top/categories/%E7%BD%91%E7%BB%9C%E6%94%BB%E5%87%BB/</link><description>Recent content in ç½‘ç»œæ”»å‡» on Yellster - Blog</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><managingEditor>xyp_selune@163.com (Yellster)</managingEditor><webMaster>xyp_selune@163.com (Yellster)</webMaster><lastBuildDate>Sun, 07 Apr 2024 14:48:30 +0800</lastBuildDate><atom:link href="https://blog.yellster.top/categories/%E7%BD%91%E7%BB%9C%E6%94%BB%E5%87%BB/index.xml" rel="self" type="application/rss+xml"/><item><title>Webæ”»å‡»ä¹‹ SQLæ³¨å…¥</title><link>https://blog.yellster.top/p/web-attack-sql-injection/</link><pubDate>Sun, 07 Apr 2024 14:48:30 +0800</pubDate><author>xyp_selune@163.com (Yellster)</author><guid>https://blog.yellster.top/p/web-attack-sql-injection/</guid><description>&lt;h2 id="sql-æ³¨å…¥æ˜¯ä»€ä¹ˆ">SQL æ³¨å…¥æ˜¯ä»€ä¹ˆï¼Ÿ
&lt;/h2>&lt;blockquote>
&lt;p>SQL æ³¨å…¥ï¼ˆSQL Injectionï¼‰æ˜¯ä¸€ç§æ”»å‡»æ–¹å¼ï¼Œæ”»å‡»è€…é€šè¿‡â€œæ‹¼æŽ¥ç”¨æˆ·è¾“å…¥â€å’Œæ•°æ®åº“è¯­å¥ï¼Œè®©æœåŠ¡å™¨æ‰§è¡Œæ¶æ„ SQL å‘½ä»¤ï¼Œè¿›è€Œ&lt;strong>è¯»å–ã€ä¿®æ”¹ã€åˆ é™¤æ•°æ®ï¼Œç”šè‡³æŽ§åˆ¶æ•°æ®åº“ä¸»æœº&lt;/strong>ã€‚&lt;/p>&lt;/blockquote>
&lt;h2 id="sql-æ³¨å…¥æ˜¯æ€Žä¹ˆäº§ç”Ÿçš„">SQL æ³¨å…¥æ˜¯æ€Žä¹ˆäº§ç”Ÿçš„ï¼Ÿ
&lt;/h2>&lt;blockquote>
&lt;p>æœ¬è´¨ï¼š&lt;strong>ç”¨æˆ·è¾“å…¥å‚ä¸Žäº† SQL æ‹¼æŽ¥ï¼Œä¸”æ²¡æœ‰åšå®‰å…¨å¤„ç†ã€‚&lt;/strong>&lt;/p>&lt;/blockquote>
&lt;p>æ¯”å¦‚ä½ å†™äº†è¿™æ ·çš„ä»£ç ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">SELECT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">users&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">WHERE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">username&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;admin&amp;#39;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">AND&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">password&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;123456&amp;#39;&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç”¨æˆ·åœ¨ç™»å½•æ¡†è¾“å…¥ï¼š&lt;/p>
&lt;ul>
&lt;li>ç”¨æˆ·åï¼š&lt;code>admin' --&lt;/code>&lt;/li>
&lt;li>å¯†ç ï¼šï¼ˆéšä¾¿å¡«ï¼‰&lt;/li>
&lt;/ul>
&lt;p>ç»“æžœ SQL å˜æˆäº†ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sql" data-lang="sql">&lt;span class="line">&lt;span class="cl">&lt;span class="k">SELECT&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">FROM&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">users&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">WHERE&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">username&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;admin&amp;#39;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c1">--&amp;#39; AND password = &amp;#39;xxx&amp;#39;;
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;code>--&lt;/code> æ˜¯ SQL ä¸­çš„æ³¨é‡Šç¬¦ï¼ŒåŽé¢çš„éƒ¨åˆ†è¢«å¿½ç•¥ï¼Œæ”»å‡»è€…ç»•è¿‡äº†å¯†ç éªŒè¯ï¼Œ&lt;strong>æˆåŠŸç™»å½•åŽå°&lt;/strong>ï¼&lt;/p>
&lt;h2 id="sql-æ³¨å…¥èƒ½é€ æˆä»€ä¹ˆå±å®³">SQL æ³¨å…¥èƒ½é€ æˆä»€ä¹ˆå±å®³ï¼Ÿ
&lt;/h2>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>å±å®³ç±»åˆ«&lt;/th>
&lt;th>å…·ä½“æè¿°&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>ç™»å½•ç»•è¿‡&lt;/td>
&lt;td>ä¿®æ”¹ SQL è¯­å¥é€»è¾‘ï¼Œ&lt;strong>æ— éœ€å¯†ç ç›´æŽ¥ç™»å½•è´¦å·&lt;/strong>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>æ•°æ®æ³„éœ²&lt;/td>
&lt;td>&lt;code>UNION SELECT&lt;/code> ç­‰æ–¹å¼è¯»å–æ•æ„Ÿæ•°æ®ï¼ˆè´¦å·ã€å¯†ç ã€é“¶è¡Œå¡ï¼‰&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>æ•°æ®ç¯¡æ”¹&lt;/td>
&lt;td>æ‰§è¡Œ &lt;code>UPDATE&lt;/code>ã€&lt;code>DELETE&lt;/code> æ“ä½œï¼Œ&lt;strong>åˆ åº“è·‘è·¯&lt;/strong>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>å†™å…¥åŽé—¨&lt;/td>
&lt;td>æŸäº›æƒ…å†µä¸‹é…åˆæ–‡ä»¶å†™å…¥ï¼Œ&lt;strong>å†™å…¥ Webshell&lt;/strong>ï¼Œåå¼¹å‘½ä»¤è¡Œ&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>æ‹“å±•æ”»å‡»&lt;/td>
&lt;td>é€šè¿‡æ•°æ®åº“èŽ·å–æœåŠ¡å™¨æƒé™ï¼Œè¿›ä¸€æ­¥æ¨ªå‘ç§»åŠ¨æ”»å‡»å…¶ä»–ç³»ç»Ÿ&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="å¦‚ä½•é˜²å¾¡-sql-æ³¨å…¥æ ¸å¿ƒæ–¹æ³•">å¦‚ä½•é˜²å¾¡ SQL æ³¨å…¥ï¼Ÿï¼ˆæ ¸å¿ƒæ–¹æ³•ï¼‰
&lt;/h2>&lt;h3 id="ä½¿ç”¨-é¢„ç¼–è¯‘è¯­å¥prepared-statement">ä½¿ç”¨ &lt;strong>é¢„ç¼–è¯‘è¯­å¥ï¼ˆPrepared Statementï¼‰&lt;/strong>
&lt;/h3>&lt;blockquote>
&lt;p>&lt;strong>åƒä¸‡åˆ«ç›´æŽ¥æ‹¼æŽ¥å­—ç¬¦ä¸²ï¼&lt;/strong>&lt;/p>
&lt;p>&lt;strong>åƒä¸‡åˆ«ç›´æŽ¥æ‹¼æŽ¥å­—ç¬¦ä¸²ï¼&lt;/strong>&lt;/p>
&lt;p>&lt;strong>åƒä¸‡åˆ«ç›´æŽ¥æ‹¼æŽ¥å­—ç¬¦ä¸²ï¼&lt;/strong>&lt;/p>&lt;/blockquote>
&lt;p>&lt;strong>é”™è¯¯å†™æ³•ï¼ˆæ˜“è¢«æ³¨å…¥ï¼‰ï¼š&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">sql&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;SELECT * FROM users WHERE username = &amp;#39;&amp;#34;&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">user&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="s2">&amp;#34;&amp;#39;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>æ­£ç¡®å†™æ³•ï¼ˆå‚æ•°ç»‘å®šï¼Œé˜²æ³¨å…¥ï¼‰ï¼š&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">cursor&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">execute&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;SELECT * FROM users WHERE username = &lt;/span>&lt;span class="si">%s&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">user&lt;/span>&lt;span class="p">,))&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>å„ç§è¯­è¨€é€šç”¨å†™æ³•æŽ¨èä½¿ç”¨ï¼š&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>è¯­è¨€&lt;/th>
&lt;th>æŽ¨èåº“&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>PHP&lt;/td>
&lt;td>PDO + bindParam&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Python&lt;/td>
&lt;td>&lt;code>cursor.execute(sql, param)&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Java&lt;/td>
&lt;td>&lt;code>PreparedStatement&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Node.js&lt;/td>
&lt;td>&lt;code>mysql.format()&lt;/code>ã€ORM&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="è¾“å…¥æ ¡éªŒ--ç™½åå•é™åˆ¶">è¾“å…¥æ ¡éªŒ + ç™½åå•é™åˆ¶
&lt;/h3>&lt;ul>
&lt;li>åªå…è®¸åˆæ³•å­—ç¬¦ï¼ˆå¦‚ç”¨æˆ·ååªèƒ½æ˜¯å­—æ¯ã€æ•°å­—ï¼‰&lt;/li>
&lt;li>é™åˆ¶å­—æ®µé•¿åº¦ã€æ ¼å¼ï¼ˆå¦‚æ‰‹æœºå·å¿…é¡» 11 ä½ï¼‰&lt;/li>
&lt;/ul>
&lt;h3 id="æœ€å°æƒé™åŽŸåˆ™">æœ€å°æƒé™åŽŸåˆ™
&lt;/h3>&lt;ul>
&lt;li>æ•°æ®åº“è´¦å·åªç»™å¿…è¦æƒé™&lt;/li>
&lt;li>ä¸è¦ç”¨ &lt;code>root&lt;/code> è´¦æˆ·è¿žæŽ¥æ•°æ®åº“ï¼&lt;/li>
&lt;/ul>
&lt;h3 id="é”™è¯¯ä¿¡æ¯ä¸æš´éœ²">é”™è¯¯ä¿¡æ¯ä¸æš´éœ²
&lt;/h3>&lt;ul>
&lt;li>SQL æŠ¥é”™ä¸èƒ½ç›´æŽ¥æ˜¾ç¤ºç»™ç”¨æˆ·ï¼ˆå®¹æ˜“æ³„éœ²è¡¨åã€å­—æ®µåï¼‰&lt;/li>
&lt;li>ä½¿ç”¨ç»Ÿä¸€çš„é”™è¯¯æç¤ºé¡µé¢&lt;/li>
&lt;/ul>
&lt;h3 id="ä½¿ç”¨-orm-æ¡†æž¶ä½†è¦å°å¿ƒ">ä½¿ç”¨ ORM æ¡†æž¶ï¼ˆä½†è¦å°å¿ƒï¼‰
&lt;/h3>&lt;p>ORMï¼ˆå¦‚ Django ORMã€Hibernateï¼‰é»˜è®¤é˜²æ³¨å…¥ï¼Œä½†ï¼š&lt;/p>
&lt;ul>
&lt;li>ä»å¯èƒ½å› åŽŸç”Ÿ SQL è¢«è¯¯ç”¨è€Œæ³¨å…¥&lt;/li>
&lt;li>ORM çš„ &lt;code>extra()&lt;/code> / &lt;code>raw()&lt;/code> / &lt;code>execute()&lt;/code> ç­‰æŽ¥å£ä½¿ç”¨æ—¶è¦å°å¿ƒ&lt;/li>
&lt;/ul>
&lt;h3 id="wafips-ç½‘ç»œå±‚é˜²å¾¡">WAF/IPS ç½‘ç»œå±‚é˜²å¾¡
&lt;/h3>&lt;ul>
&lt;li>ä½¿ç”¨ Web åº”ç”¨é˜²ç«å¢™æ‹¦æˆªæ³¨å…¥å…³é”®è¯&lt;/li>
&lt;li>é…åˆæ—¥å¿—æŠ¥è­¦ã€éªŒè¯ç é™åˆ¶ç­‰æ–¹å¼å¢žå¼ºé˜²å¾¡æ·±åº¦&lt;/li>
&lt;/ul>
&lt;h2 id="æ€»ç»“ä¸€å¥è¯">æ€»ç»“ä¸€å¥è¯
&lt;/h2>&lt;blockquote>
&lt;p>&lt;strong>SQL æ³¨å…¥ä¹‹æ‰€ä»¥å¯æ€•ï¼Œæ˜¯å› ä¸ºå¼€å‘è€…ä¿¡äº†ç”¨æˆ·çš„â€œè¾“å…¥â€ï¼Œæ•°æ®åº“å´æŠŠå®ƒå½“â€œå‘½ä»¤â€ã€‚&lt;/strong>&lt;/p>&lt;/blockquote></description></item><item><title>Webæ”»å‡»ä¹‹ XSS</title><link>https://blog.yellster.top/p/web-attack-xss/</link><pubDate>Mon, 01 Apr 2024 14:48:30 +0800</pubDate><author>xyp_selune@163.com (Yellster)</author><guid>https://blog.yellster.top/p/web-attack-xss/</guid><description>&lt;h2 id="xss-æ˜¯ä»€ä¹ˆ">XSS æ˜¯ä»€ä¹ˆï¼Ÿ
&lt;/h2>&lt;p>XSS (Cross-Site Scripting) æ˜¯ä¸€ç§ç½‘ç«™å®‰å…¨æ¼æ´žï¼Œå…¶åŽŸç†æ˜¯æ”¾å…¥æ¶æ„è„šæœ¬ï¼Œè®©ç”¨æˆ·çš„æµè§ˆå™¨æ‰§è¡Œç½‘ç«™æœªç­›æŸ¥çš„ JS è„šæœ¬ï¼Œå¯¼è‡´æ•°æ®è¢«çªƒå–ã€è¡¨å•è¢«ä½œå¼Šã€é¡µé¢è¢«ç¯¡æ”¹ç­‰ã€‚&lt;/p>
&lt;blockquote>
&lt;p>XSS ä¸åªæ˜¯æŠ€æœ¯æ¼æ´žï¼Œæ›´æ˜¯ä¿¡ä»»çš„ç ´åè€…!&lt;/p>
&lt;p>XSS çœ‹èµ·æ¥æ˜¯å¼¹ä¸ªçª—ï¼Œå®žé™…ä¸Šæ˜¯æŠŠé’¥åŒ™å·äº†ã€é’±æŠ½äº†ã€åŽé¢è¿˜è·Ÿä½ è¯´æ˜¯ä½ è‡ªæ„¿çš„ã€‚&lt;/p>&lt;/blockquote>
&lt;h2 id="xss-ç±»åž‹">XSS ç±»åž‹
&lt;/h2>&lt;h3 id="åå°„åž‹-xssreflected-xss">&lt;strong>åå°„åž‹ XSSï¼ˆReflected XSSï¼‰&lt;/strong>
&lt;/h3>&lt;ul>
&lt;li>&lt;strong>è¿‡ç¨‹&lt;/strong>ï¼šæ”»å‡»è€…æž„é€ ä¸€ä¸ªæ¶æ„é“¾æŽ¥ï¼ŒæŠŠ &lt;code>&amp;lt;script&amp;gt;&lt;/code> æ”¾åœ¨ URL é‡Œ â†’ å—å®³è€…ç‚¹å‡»é“¾æŽ¥ â†’ æœåŠ¡ç«¯æŠŠå‚æ•°åŽŸæ ·â€œåå°„â€å›žç½‘é¡µ â†’ æµè§ˆå™¨æ‰§è¡Œè„šæœ¬ã€‚&lt;/li>
&lt;li>&lt;strong>å…³é”®ç‚¹&lt;/strong>ï¼šæ”»å‡»ä»£ç ä¸åœ¨æœåŠ¡ç«¯æŒä¹…ä¿å­˜ï¼Œé â€œé’“é±¼é“¾æŽ¥â€è§¦å‘ã€‚&lt;/li>
&lt;li>&lt;strong>å¸¸è§åœºæ™¯&lt;/strong>ï¼šæœç´¢æ¡†ã€è·³è½¬é“¾æŽ¥ã€é”™è¯¯æç¤ºä¿¡æ¯ã€‚&lt;/li>
&lt;/ul>
&lt;p>ðŸ§  ç±»æ¯”è®°å¿†ï¼šåƒâ€œå›žéŸ³å¢™â€ï¼Œä½ è¯´ä»€ä¹ˆå®ƒå°±å›žä»€ä¹ˆã€‚&lt;/p>
&lt;hr>
&lt;h3 id="å­˜å‚¨åž‹-xssstored-xss">&lt;strong>å­˜å‚¨åž‹ XSSï¼ˆStored XSSï¼‰&lt;/strong>
&lt;/h3>&lt;ul>
&lt;li>&lt;strong>è¿‡ç¨‹&lt;/strong>ï¼šæ”»å‡»è€…æäº¤è„šæœ¬ï¼ˆæ¯”å¦‚å‘è¯„è®ºï¼‰â†’ æœåŠ¡ç«¯ä¿å­˜åˆ°æ•°æ®åº“ â†’ å…¶ä»–ç”¨æˆ·è®¿é—®è¿™æ¡è¯„è®º â†’ æµè§ˆå™¨æ‰§è¡Œè„šæœ¬ã€‚&lt;/li>
&lt;li>&lt;strong>å…³é”®ç‚¹&lt;/strong>ï¼šè„šæœ¬ &lt;strong>è¢«å­˜å‚¨ä¸‹æ¥&lt;/strong>ï¼Œè®¿é—®é¡µé¢æ—¶è‡ªåŠ¨è§¦å‘ï¼Œä¸éœ€è¦ç‰¹æ„ç‚¹å‡»é“¾æŽ¥ã€‚&lt;/li>
&lt;li>&lt;strong>å¸¸è§åœºæ™¯&lt;/strong>ï¼šè¯„è®ºåŒºã€è®ºå›å¸–å­ã€ä¸ªäººèµ„æ–™é¡µã€å®¢æœèŠå¤©è®°å½•ç­‰ã€‚&lt;/li>
&lt;/ul>
&lt;p>ðŸ§  ç±»æ¯”è®°å¿†ï¼šåƒç—…æ¯’è—åœ¨å¿«é€’é‡Œï¼Œæ¯ä¸ªäººæ”¶ä»¶å°±ä¼šæ„ŸæŸ“ã€‚&lt;/p>
&lt;hr>
&lt;h3 id="dom-åž‹-xssdom-based-xss">&lt;strong>DOM åž‹ XSSï¼ˆDOM-based XSSï¼‰&lt;/strong>
&lt;/h3>&lt;ul>
&lt;li>&lt;strong>è¿‡ç¨‹&lt;/strong>ï¼šæµè§ˆå™¨ JS è¯»å– URL å‚æ•°ã€Hashã€Cookie ç­‰ â†’ åŠ¨æ€å†™å…¥é¡µé¢ï¼ˆinnerHTMLã€document.writeï¼‰ â†’ æ²¡æœ‰åšè½¬ä¹‰ â†’ æ‰§è¡Œè„šæœ¬ã€‚&lt;/li>
&lt;li>&lt;strong>å…³é”®ç‚¹&lt;/strong>ï¼š&lt;strong>å®Œå…¨ä¸ç»è¿‡æœåŠ¡ç«¯&lt;/strong>ï¼Œæ¼æ´žå­˜åœ¨äºŽå‰ç«¯ JS çš„å¤„ç†é€»è¾‘ä¸­ã€‚&lt;/li>
&lt;li>&lt;strong>å¸¸è§åœºæ™¯&lt;/strong>ï¼šå•é¡µåº”ç”¨ï¼ˆSPAï¼‰ã€å‰ç«¯æ¡†æž¶ä¸­å¸¸è§ã€‚&lt;/li>
&lt;/ul>
&lt;p>ðŸ§  ç±»æ¯”è®°å¿†ï¼šåƒæ˜¯æµè§ˆå™¨è‡ªå·±ç»™è‡ªå·±æŒ–å‘ï¼Œè‡ªå·±è·³è¿›åŽ»ã€‚&lt;/p>
&lt;h3 id="ä¸€ä¸ªä¾‹å­ä¸‰ç§å†™æ³•å¯¹æ¯”">ä¸€ä¸ªä¾‹å­ï¼Œä¸‰ç§å†™æ³•å¯¹æ¯”
&lt;/h3>&lt;p>ä»¥æ”»å‡»è€…æƒ³å¼¹çª— &lt;code>alert(1)&lt;/code> ä¸ºä¾‹ï¼š&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;strong>åå°„åž‹&lt;/strong>ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">http&lt;/span>&lt;span class="o">:&lt;/span>&lt;span class="c1">//site.com/search?q=&amp;lt;script&amp;gt;alert(1)&amp;lt;/script&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;li>
&lt;p>&lt;strong>å­˜å‚¨åž‹&lt;/strong>ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-html" data-lang="html">&lt;span class="line">&lt;span class="cl">&lt;span class="p">&amp;lt;&lt;/span>&lt;span class="nt">input&lt;/span> &lt;span class="na">name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;comment&amp;#34;&lt;/span> &lt;span class="na">value&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">&amp;#34;&amp;lt;script&amp;gt;alert(1)&amp;lt;/script&amp;gt;&amp;#34;&lt;/span>&lt;span class="p">&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ç„¶åŽè¿™ä¸ªè¯„è®ºè¢«å­˜è¿›æ•°æ®åº“ï¼Œåˆ«äººä¸€æ‰“å¼€å°±è§¦å‘ã€‚&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>DOM åž‹&lt;/strong>ï¼ˆJS ä»£ç ï¼‰ï¼š&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-javascript" data-lang="javascript">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// JS ä»£ç ç›´æŽ¥å– URL å‚æ•°æ’åˆ°é¡µé¢
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="nb">document&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">getElementById&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;output&amp;#39;&lt;/span>&lt;span class="p">).&lt;/span>&lt;span class="nx">innerHTML&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nx">location&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">hash&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// è®¿é—®ï¼š http://site.com/#&amp;lt;script&amp;gt;alert(1)&amp;lt;/script&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;/li>
&lt;/ul>
&lt;h3 id="æ ¸å¿ƒåŒºåˆ«">æ ¸å¿ƒåŒºåˆ«
&lt;/h3>&lt;table>
&lt;thead>
&lt;tr>
&lt;th>ç±»åž‹&lt;/th>
&lt;th>æ¶æ„è„šæœ¬ä½ç½®&lt;/th>
&lt;th>è§¦å‘æ–¹å¼&lt;/th>
&lt;th>æ˜¯å¦å­˜å‚¨&lt;/th>
&lt;th>ç¤ºä¾‹&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>åå°„åž‹ XSS&lt;/td>
&lt;td>URL å‚æ•°ä¸­&lt;/td>
&lt;td>ç‚¹å‡»æ¶æ„é“¾æŽ¥&lt;/td>
&lt;td>âŒ å¦&lt;/td>
&lt;td>æœç´¢â€œ&amp;lt;script&amp;gt;alert(1)&amp;lt;/script&amp;gt;â€&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>å­˜å‚¨åž‹ XSS&lt;/td>
&lt;td>æ•°æ®åº“ / æ—¥å¿—&lt;/td>
&lt;td>æ‰“å¼€å¯ç”¨é¡µé¢&lt;/td>
&lt;td>âœ… æ˜¯&lt;/td>
&lt;td>è¯„è®ºåŒºä¸­çš„ script&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>DOM åž‹ XSS&lt;/td>
&lt;td>å‰ç«¯ DOM æ“ä½œ&lt;/td>
&lt;td>JS ä»£ç åŠ¨æ€è§¦å‘&lt;/td>
&lt;td>âŒ å¦&lt;/td>
&lt;td>JS æŠŠ location.hash å†™å…¥ HTML&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="xss-çš„å®³å¤„">XSS çš„å®³å¤„
&lt;/h2>&lt;h3 id="å¯¹ä¸ªäºº">ã€å¯¹ä¸ªäººã€‘
&lt;/h3>&lt;ul>
&lt;li>çªƒå– Cookie/ä¼šè¯å‡­è¯ï¼šå·å–ç™»å½•çŠ¶æ€ï¼Œå·å–è´¦å·&lt;/li>
&lt;li>ä¼ªé€ é¡µé¢ï¼šä¼ªè®¤è¯/ä¼ªæ”¯ä»˜ç &lt;/li>
&lt;li>å¼ºåˆ¶æ“ä½œï¼šåˆ‡æ¢åœºæ™¯åˆæˆ CSRF&lt;/li>
&lt;li>æŽ¨å…‰æ€§å¼¹çª—/è·³è½¬ï¼šéª—å±/è‰²æƒ…/è½¬è´¦&lt;/li>
&lt;/ul>
&lt;h3 id="å¯¹ç³»ç»Ÿ">ã€å¯¹ç³»ç»Ÿã€‘
&lt;/h3>&lt;ul>
&lt;li>æ•°æ®å¤§é‡è¢«å·å–&lt;/li>
&lt;li>ç½‘ç«™å†…å®¹è¢«ä¹±ç¯¡æ”¹&lt;/li>
&lt;li>æ·»åŠ  iframe æˆ–åŠ¨æ€ä¸‹è½½æž„æˆæœ¨é©¬&lt;/li>
&lt;/ul>
&lt;h3 id="å¯¹ä¸šåŠ¡">ã€å¯¹ä¸šåŠ¡ã€‘
&lt;/h3>&lt;ul>
&lt;li>ç”¨æˆ·ä¿¡ä»»å±‚å±‚åå&lt;/li>
&lt;li>è§„èŒƒé£Žé™©ï¼ˆå¦‚ GDPRã€ç½‘å®‰æ³•ï¼‰&lt;/li>
&lt;li>è¢«æœç´¢å¼•æ“Ž/å®‰å…¨ç½‘ç«™æ‹¦æˆª&lt;/li>
&lt;/ul>
&lt;h2 id="é˜²å¾¡">é˜²å¾¡
&lt;/h2>&lt;h3 id="è¾“å‡ºç¼–ç æœ€æ ¸å¿ƒ">è¾“å‡ºç¼–ç ï¼ˆæœ€æ ¸å¿ƒï¼ï¼‰
&lt;/h3>&lt;blockquote>
&lt;p>åŽŸåˆ™ï¼š&lt;strong>â€œä¿¡ç”¨æˆ·è¾“å…¥ï¼Œæ­»å¾—å¾ˆæƒ¨ï¼›ç¼–ç è¾“å‡ºï¼Œæ´»å¾—å¾ˆç¨³ã€‚â€&lt;/strong>&lt;/p>&lt;/blockquote>
&lt;p>æ ¹æ®è¾“å‡ºä½ç½®åšå¯¹åº”ç¼–ç ï¼ˆä¸åªæ˜¯æ›¿æ¢ &lt;code>&amp;lt; &amp;gt;&lt;/code> è¿™ä¹ˆç®€å•ï¼‰ï¼š&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>è¾“å‡ºä½ç½®&lt;/th>
&lt;th>ç¼–ç æ–¹å¼&lt;/th>
&lt;th>ç¤ºä¾‹&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>HTML å…ƒç´ å†…å®¹&lt;/td>
&lt;td>&lt;code>htmlEncode()&lt;/code>&lt;/td>
&lt;td>&lt;code>&amp;lt;div&amp;gt;${userInput}&amp;lt;/div&amp;gt;&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>HTML å±žæ€§å€¼&lt;/td>
&lt;td>&lt;code>attributeEncode()&lt;/code>&lt;/td>
&lt;td>&lt;code>&amp;lt;a href=&amp;quot;${userInput}&amp;quot;&amp;gt;&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>JS ä¸­çš„å˜é‡&lt;/td>
&lt;td>&lt;code>jsEncode()&lt;/code>&lt;/td>
&lt;td>&lt;code>var msg = '${input}';&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>URL ä¸­çš„å‚æ•°&lt;/td>
&lt;td>&lt;code>encodeURIComponent()&lt;/code>&lt;/td>
&lt;td>&lt;code>location.href = ...&lt;/code>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;blockquote>
&lt;p>âœï¸ è®°ä½ä¸€å¥è¯ï¼š&lt;strong>ä¸è¦åŽŸæ ·è¾“å‡ºç”¨æˆ·è¾“å…¥ï¼Œå¿…é¡»æ ¹æ®ä¸Šä¸‹æ–‡ç¼–ç ï¼&lt;/strong>&lt;/p>&lt;/blockquote>
&lt;h3 id="è¾“å…¥è¿‡æ»¤è¾…åŠ©é˜²çº¿">è¾“å…¥è¿‡æ»¤ï¼ˆè¾…åŠ©é˜²çº¿ï¼‰
&lt;/h3>&lt;p>è™½ç„¶ä¸èƒ½å®Œå…¨é˜²æ­¢ XSSï¼Œä½†èƒ½å¤§å¹…é™ä½Žæ”»å‡»éš¾åº¦ã€‚&lt;/p>
&lt;ul>
&lt;li>åŽ»é™¤æ ‡ç­¾ï¼šå¦‚ &lt;code>&amp;lt;script&amp;gt;&lt;/code>, &lt;code>&amp;lt;iframe&amp;gt;&lt;/code> ç­‰ã€‚&lt;/li>
&lt;li>é»‘åå•æ³•æœ‰é™ï¼ŒæŽ¨èä½¿ç”¨ç™½åå•æ³•ï¼šåªå…è®¸éƒ¨åˆ† HTML æ ‡ç­¾ã€‚
&lt;ul>
&lt;li>æŽ¨èåº“ï¼š&lt;code>DOMPurify&lt;/code>ï¼ˆå‰ç«¯ï¼‰ / &lt;code>OWASP Java HTML Sanitizer&lt;/code>ï¼ˆåŽç«¯ï¼‰&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="http-å®‰å…¨å¤´éƒ¨è®¾ç½®">HTTP å®‰å…¨å¤´éƒ¨è®¾ç½®
&lt;/h3>&lt;p>&lt;strong>Content-Security-Policy (CSP):&lt;/strong>&lt;/p>
&lt;p>å®šä¹‰å…è®¸åŠ è½½çš„èµ„æºç±»åž‹ã€åŸŸåï¼Œé˜»æ­¢æ¶æ„è„šæœ¬æ‰§è¡Œã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-http" data-lang="http">&lt;span class="line">&lt;span class="cl">&lt;span class="err">Content-Security-Policy: default-src &amp;#39;self&amp;#39;; script-src &amp;#39;self&amp;#39;
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>ä½œç”¨ï¼š&lt;/p>
&lt;ul>
&lt;li>ç¦æ­¢å†…è” &lt;code>&amp;lt;script&amp;gt;&lt;/code> æ‰§è¡Œ&lt;/li>
&lt;li>é˜»æ­¢ç¬¬ä¸‰æ–¹ JS åŠ è½½&lt;/li>
&lt;li>æ£€æµ‹å¼‚å¸¸è¡Œä¸º&lt;/li>
&lt;/ul>
&lt;h3 id="httponly--secure-cookie">HttpOnly + Secure Cookie
&lt;/h3>&lt;p>&lt;strong>è®¾ç½® Cookie ä¸º HttpOnly:&lt;/strong>&lt;/p>
&lt;p>é˜²æ­¢ JS è¯»å– Cookieï¼ˆæ”»å‡»è€…çªƒå–å¤±è´¥ï¼‰ã€‚&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-http" data-lang="http">&lt;span class="line">&lt;span class="cl">&lt;span class="err">Set-Cookie: session=xxx; HttpOnly; Secure
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="å‰ç«¯æ¡†æž¶é˜²æŠ¤æœºåˆ¶ä½†åˆ«å®Œå…¨ä¾èµ–">å‰ç«¯æ¡†æž¶é˜²æŠ¤æœºåˆ¶ï¼ˆä½†åˆ«å®Œå…¨ä¾èµ–ï¼‰
&lt;/h3>&lt;ul>
&lt;li>Vueã€React ç­‰é»˜è®¤ä¼šå¯¹æ•°æ®åš HTML è½¬ä¹‰&lt;/li>
&lt;li>&lt;strong>ä½†è¦æ³¨æ„&lt;/strong>ï¼š
&lt;ul>
&lt;li>&lt;code>v-html&lt;/code>ï¼ˆVueï¼‰/ &lt;code>dangerouslySetInnerHTML&lt;/code>ï¼ˆReactï¼‰ è¿™äº›æŽ¥å£ç»•è¿‡äº†é˜²æŠ¤ï¼&lt;/li>
&lt;li>åƒä¸‡ä¸è¦å¯¹ç”¨æˆ·æ•°æ®ä½¿ç”¨è¿™äº› APIï¼&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;h3 id="å…¶ä»–è¡¥å……æŽªæ–½">å…¶ä»–è¡¥å……æŽªæ–½
&lt;/h3>&lt;ul>
&lt;li>è¡¨å•æäº¤åŠ éªŒè¯ç ï¼šå‡ç¼“è‡ªåŠ¨åŒ–è„šæœ¬æ”»å‡»&lt;/li>
&lt;li>æ—¥å¿—è®°å½• + å¼‚å¸¸ç›‘æŽ§ï¼šé…åˆ WAF å®žæ—¶ç›‘æŽ§å¼‚å¸¸è¡Œä¸º&lt;/li>
&lt;li>ä½¿ç”¨ Web å®‰å…¨ç½‘å…³ / äº‘ WAFï¼šé˜²æŠ¤åŸºç¡€è®¾æ–½çº§åˆ«çš„ XSS å°è¯•&lt;/li>
&lt;/ul>
&lt;h3 id="ä¸€å¥è¯æ€»ç»“">ä¸€å¥è¯æ€»ç»“
&lt;/h3>&lt;blockquote>
&lt;p>&lt;strong>XSS é˜²ä¸ä½çš„æ ¹æœ¬åŽŸå› ï¼Œä¸æ˜¯æ¡†æž¶ä¸è¡Œï¼Œæ˜¯å¼€å‘è€…åœ¨çžŽä¼ å­—ç¬¦ä¸²ã€‚&lt;/strong>&lt;/p>
&lt;p>æ‰€ä»¥é˜²å¾¡çš„å…³é”®åœ¨äºŽï¼š&lt;strong>å‡¡æ˜¯ç”¨æˆ·è¾“å…¥çš„ï¼Œéƒ½ä¸è¦ç›¸ä¿¡ï¼›å‡¡æ˜¯è¾“å‡ºå‰çš„ï¼Œéƒ½è¦å¤„ç†ã€‚&lt;/strong>&lt;/p>&lt;/blockquote></description></item></channel></rss>